{% load static %} {% block css %}

<link
  href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
  rel="stylesheet"
/>
<link
  href="{% static 'plugins/css/ace.min.css' %}"
  type="text/css"
  media="all"
  rel="stylesheet"
/>
<link
  href="{% static 'plugins/css/resizable.min.css' %}"
  type="text/css"
  media="all"
  rel="stylesheet"
/>
<link
  href="{% static 'martor/css/martor.bootstrap.css' %}"
  type="text/css"
  media="all"
  rel="stylesheet"
/>
{% comment %} Detail of tag {% endblock %} {% block content %}
<div>{{data}}</div>
<div>{{data.tag_id}}</div>
<div>{{data.tag_name}}</div>
<div>{{data.posts}}</div>
{% endcomment %} {% endblock %} {% block content %} {% comment %}
<div class="container mx-auto h-full" style="width: 50%">
  <h1 class="text-left mb-4 font-bold text-5xl">{{ data.tag_name }}</h1>
  <h5 class="mb-4 text-lg">A collection of {{ data.posts|length }} posts</h5>

  <div class="grid grid-cols-2 md:grid-cols-3 gap-4 h-full">
    {% for post in data.posts %}
    <a
      href="{% url 'post' post.id %}"
      class="flex flex-col items-left h-72 justify-center bg-white shadow-2xl rounded-lg p-4 gap-4 overflow-hidden w-full"
    >
      {% if post.thumbnail %}
      <img src="{{ post.thumbnail }}" alt="Thumbnail" style="height: 100px" />
      {% endif %}

      <h1 class="font-bold text-2xl mb-3 overflow-hidden line-clamp-3">
        {{ post.title }}
      </h1>
      <p class="text-sm mb-1">
        <strong>Created on:</strong> {{ post.created_on }}
      </p>
      <p class="text-sm mb-1"><strong>Author:</strong> {{ post.author }}</p>
      <div
        class="mx-auto mt-10 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 border-t border-gray-200 pt-10 sm:mt-16 sm:pt-16 lg:mx-0 lg:max-w-none lg:grid-cols-3"
      >
        <article class="flex max-w-xl flex-col items-start justify-between">
          <div class="flex items-center gap-x-4 text-xs">
            <time datetime="2020-03-16" class="text-gray-500"
              >Mar 16, 2020</time
            >
            <a
              href="#"
              class="relative z-10 rounded-full bg-gray-50 px-3 py-1.5 font-medium text-gray-600 hover:bg-gray-100"
              >Marketing</a
            >
          </div>
          <div class="group relative">
            <h3
              class="mt-3 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600"
            >
              <a href="#">
                <span class="absolute inset-0"></span>
                Boost your conversion rate
              </a>
            </h3>
            <p class="mt-5 line-clamp-3 text-sm leading-6 text-gray-600">
              Illo sint voluptas. Error voluptates culpa eligendi. Hic vel totam
              vitae illo. Non aliquid explicabo necessitatibus unde. Sed
              exercitationem placeat consectetur nulla deserunt vel. Iusto
              corrupti dicta.
            </p>
          </div>
          <div class="relative mt-8 flex items-center gap-x-4">
            <img
              src="https://images.unsplash.com/photo-1519244703995-f4e0f30006d5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
              alt=""
              class="h-10 w-10 rounded-full bg-gray-50"
            />
            <div class="text-sm leading-6">
              <p class="font-semibold text-gray-900">
                <a href="#">
                  <span class="absolute inset-0"></span>
                  Michael Foster
                </a>
              </p>
              <p class="text-gray-600">Co-Founder / CTO</p>
            </div>
          </div>
        </article>

        <!-- More posts... -->
      </div>
    </a>
    {% endfor %}
  </div>
</div>
{% endcomment %}
<div class="container mx-auto h-full pt-12" style="width: 60%">
  <h1 class="text-left mb-4 font-bold text-5xl">{{ data.tag_name }}</h1>
  <h5 class="mb-4 text-lg">A collection of {{ data.posts|length }} posts</h5>
  <div class="bg-white py-12 sm:py-16">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div
        class="grid grid-cols-1 gap-8 sm:gap-x-8 sm:gap-y-16 lg:grid-cols-3 lg:gap-16"
      >
        {% for post in data.posts %}
        <article
          class="block border-2 p-4 shadow bg-gray-100 rounded-lg cursor-pointer"
          data-url="{% url 'post' post.id %}"
        >
          <div class="flex items-center gap-4 text-xs text-gray-500">
            <time datetime="{{ post.created_on }}">{{ post.created_on }}</time>
          </div>
          <div class="group relative mt-3">
            <h3
              class="text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600 truncate"
            >
              <span>{{ post.title }}</span>
            </h3>
            <img
              src="{{ post.thumbnail }}"
              alt=""
              class="h-40 w-full bg-gray-50 py-4"
            />
          </div>
          <div class="flex items-center mt-4">
            <img
              src="{{ post.author_profile_image }}"
              alt=""
              class="h-10 w-10 rounded-full bg-gray-50"
            />
            <div class="text-sm leading-6 ml-2">
              <p class="font-semibold text-gray-900">
                <a href="#">{{ post.author }}</a>
              </p>
              <p class="text-gray-600">Writer</p>
            </div>
          </div>
          {% for tag in post.  %}{% endfor %}
        </article>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block js %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const articles = document.querySelectorAll("article[data-url]");

    articles.forEach((article) => {
      article.addEventListener("click", () => {
        const url = article.getAttribute("data-url");
        if (url) {
          window.location.href = url;
        }
      });
    });
  });
</script>

{% endblock %}
